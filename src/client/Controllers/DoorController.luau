--[[
	DoorController - Contr√¥leur des portes
	G√®re le son de t√©l√©portation quand on passe une porte
]]

local ReplicatedStorage = game:GetService("ReplicatedStorage")

local DoorController = {}

-- D√©pendances
local SoundManager = nil

-- Initialiser le contr√¥leur
function DoorController.initialize(deps)
	SoundManager = deps.SoundManager
end

-- G√©rer la t√©l√©portation
function DoorController.onDoorTeleport()
	print("üö™ T√©l√©portation par porte")

	-- Son de t√©l√©portation
	if SoundManager then
		SoundManager.playLocalSound("DoorTeleport")
	end
end

-- Connecter aux √©v√©nements
function DoorController.connect()
	local remotesFolder = ReplicatedStorage:WaitForChild("Remotes", 10)
	if not remotesFolder then
		warn("‚ùå DoorController: Impossible de trouver le dossier Remotes!")
		return
	end

	local doorTeleportEvent = remotesFolder:WaitForChild("DoorTeleport", 5)
	if doorTeleportEvent then
		doorTeleportEvent.OnClientEvent:Connect(function()
			DoorController.onDoorTeleport()
		end)
	end

	print("‚úÖ DoorController connect√©")
end

return DoorController
