--[[
	Commande: /showgrid
	Afficher la grille compl√®te avec toutes les salles g√©n√©r√©es
]]

local ShowGridCommand = {}

ShowGridCommand.metadata = {
	name = "showgrid",
	description = "Afficher toutes les salles g√©n√©r√©es",
	usage = "/showgrid",
	adminOnly = true,
	aliases = {"grid", "map"},
}

function ShowGridCommand.execute(player, args, gameState)
	local output = "üó∫Ô∏è GRILLE DU MONDE (12x12):\n"
	local generated = 0

	for y = 0, gameState.CONFIG.GRID_SIZE - 1 do
		local line = ""
		for x = 0, gameState.CONFIG.GRID_SIZE - 1 do
			if gameState.worldGrid[x][y] then
				generated = generated + 1
				if x == gameState.startPos.x and y == gameState.startPos.y then
					line = line .. "[O]" -- D√©part
				elseif x == gameState.endPos.x and y == gameState.endPos.y then
					line = line .. "[Z]" -- Arriv√©e
				else
					line = line .. "[‚ñ†]" -- Salle g√©n√©r√©e
				end
			else
				line = line .. "[ ]" -- Vide
			end
		end
		output = output .. line .. "\n"
	end

	output = output .. "\nSalles g√©n√©r√©es: " .. generated .. "/" .. (gameState.CONFIG.GRID_SIZE * gameState.CONFIG.GRID_SIZE)
	output = output .. "\nD√©part O: (" .. gameState.startPos.x .. ", " .. gameState.startPos.y .. ")"
	output = output .. "\nArriv√©e Z: (" .. gameState.endPos.x .. ", " .. gameState.endPos.y .. ")"

	print(output)
	return true, "Grille affich√©e dans la console"
end

return ShowGridCommand
